# ConsensusAI é–‹ç™ºã‚¬ã‚¤ãƒ‰

## ğŸ› ï¸ é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶
- Node.js 18.xä»¥ä¸Š
- npm ã¾ãŸã¯ yarn
- Git

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †
```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd ConsensusAI

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd client && npm install
cd ../server && npm install

# ç’°å¢ƒè¨­å®š
cp server/.env.example server/.env
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’é©åˆ‡ã«è¨­å®š

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
cd server
npx prisma migrate dev
npx prisma generate

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
# Terminal 1: Backend
cd server && npm run dev

# Terminal 2: Frontend  
cd client && npm run dev
```

## ğŸ“‹ é‡è¦ãªé–‹ç™ºãƒ«ãƒ¼ãƒ«

### 1. CRUDæ“ä½œã®å®Ÿè£…å¿…é ˆãƒ«ãƒ¼ãƒ«
**å…¨ã¦ã®CRUDæ“ä½œã¯Firebase + SQL Databaseä¸¡æ–¹ã«å¯¾ã—ã¦å®Ÿè¡Œã™ã‚‹**

```typescript
// âœ… æ­£ã—ã„å®Ÿè£…ä¾‹
async function createProject(data) {
    // 1. SQLiteæ“ä½œï¼ˆç¬¬ä¸€å„ªå…ˆï¼‰
    const sqlResult = await prisma.project.create({ data });
    
    // 2. Firebaseæ“ä½œï¼ˆç¬¬äºŒå„ªå…ˆï¼‰
    await firebase.ref(`users/${userId}/projects/${sqlResult.id}`).set({
        ...sqlResult,
        firebaseId: sqlResult.id
    });
    
    // 3. ã‚¨ãƒ©ãƒ¼æ™‚ã¯å…¨ä½“ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
    return sqlResult;
}

// âŒ ä¸æ­£ãªå®Ÿè£…ä¾‹
async function createProject(data) {
    // SQLiteã®ã¿ - FirebaseåŒæœŸãªã—ï¼ˆNGï¼‰
    return await prisma.project.create({ data });
}
```

### 2. ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ä¿è¨¼
- ç‰‡æ–¹ãŒæˆåŠŸãƒ»ç‰‡æ–¹ãŒå¤±æ•—ã®å ´åˆã¯å®Œå…¨ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³çš„ãªåŸå­æ€§ä¿è¨¼
- ãƒ‡ãƒ¼ã‚¿ä¸æ•´åˆçŠ¶æ…‹ã®å›é¿

### 3. AIåˆ†æçµ±ä¸€å®Ÿè£…ãƒ«ãƒ¼ãƒ«
**Claude Code SDKã¨OpenAI APIã§å®Œå…¨ã«åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨**

```typescript
// çµ±ä¸€å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
class AIService {
    async generateResponse(prompt: string, model?: string) {
        if (!model) {
            return this.generateResponseWithFallback(prompt);
        }
        return this.generateSingleResponse(prompt, model);
    }
}
```

#### é‡è¦ãªåˆ¶ç´„
- **å˜ä¸€APIå‘¼ã³å‡ºã—åŸå‰‡**: 1åº¦ã®AIåˆ†æ = 1å›ã®APIå‘¼ã³å‡ºã—
- **ãƒãƒƒãƒå‡¦ç†ç¦æ­¢**: è¤‡é›‘ãªåˆ†å‰²å‡¦ç†ã¯ä½¿ç”¨ã—ãªã„
- **é€²æ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ç¦æ­¢**: WebSocketé€²æ—æ›´æ–°ç­‰ã®è¤‡é›‘ãªä»•çµ„ã¿ã¯ä½¿ç”¨ã—ãªã„

### 4. å›½éš›åŒ–å¯¾å¿œ
```typescript
// ç¿»è¨³ã‚­ãƒ¼ã®å‘½åè¦å‰‡
t('componentName.sectionName.itemName')

// æ—¥è‹±æ··åœ¨ã®ç¦æ­¢
âŒ "Bookmarkedæ¸ˆã¿"
âœ… t('common.bookmarked') // "ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯æ¸ˆã¿" | "Bookmarked"
```

### 5. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†
**å‹•ä½œç¢ºèªæ™‚ã¯å¿…ãšæŒ‡å®šã®ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ç”¨**

- **æŒ‡å®šã‚¢ã‚«ã‚¦ãƒ³ãƒˆ**: emailãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒ `yuto.masamura@gmail.com` ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **é‡è¦**: ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã§ã¯ãªãã€emailãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç¢ºèª
- **ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: åå‰ã« `[TEST]` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ä»˜ä¸
- **ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: å‹•ä½œç¢ºèªå¾Œã¯å¿…ãšãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤

## ğŸ”§ ã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç†

### Lintã¨ãƒ“ãƒ«ãƒ‰ãƒã‚§ãƒƒã‚¯
```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
cd client
npm run lint      # ESLint ãƒã‚§ãƒƒã‚¯
npm run build     # ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
cd server
npm run build     # TypeScript ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
npx tsc --noEmit  # å‹ãƒã‚§ãƒƒã‚¯
```

### ã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] **ä¸¡DBæ“ä½œ**: Firebase + SQLä¸¡æ–¹ã¸ã®æ“ä½œã‚’å®Ÿè£…
- [ ] **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**: ã‚¨ãƒ©ãƒ¼æ™‚ã®å…¨ä½“ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
- [ ] **å›½éš›åŒ–**: æ—¥è‹±æ··åœ¨ã‚’é¿ã‘ãŸç¿»è¨³å®Ÿè£…
- [ ] **ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯**: lint/buildã‚³ãƒãƒ³ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ç¢ºèª
- [ ] **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: å‹•ä½œç¢ºèªå¾Œã®å®Œå…¨å‰Šé™¤

## ğŸš¨ ç·Šæ€¥æ™‚å¯¾å¿œ

### 500ã‚¨ãƒ©ãƒ¼ã®è§£æ±ºæ‰‹é †
```bash
# 1. å…¨ãƒ—ãƒ­ã‚»ã‚¹åœæ­¢
pkill -f "ts-node-dev"

# 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
cd server
rm -f prisma/dev.db && rm -f prisma/dev.db-journal
npx prisma migrate reset --force

# 3. ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•
npm run dev
```

### ã‚ˆãã‚ã‚‹ãƒˆãƒ©ãƒ–ãƒ«
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®ä¸æ•´åˆ**: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¾Œã®ä¸å®Œå…¨ãªå†èµ·å‹•
- **ãƒ—ãƒ­ã‚»ã‚¹ã®ç«¶åˆ**: è¤‡æ•°ã®ã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ãŒåŒæ™‚èµ·å‹•
- **ãƒãƒ¼ãƒˆã®ç«¶åˆ**: ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ä¸­

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

### Frontend (/client)
```
src/
â”œâ”€â”€ components/          # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ contexts/            # React Context (AuthContextç­‰)
â”œâ”€â”€ translations/        # å›½éš›åŒ–ãƒ•ã‚¡ã‚¤ãƒ« (ja/en)
â”œâ”€â”€ lib/                # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¨­å®š (Firebaseç­‰)
â””â”€â”€ types/              # TypeScriptå‹å®šç¾©
```

### Backend (/server)
```
src/
â”œâ”€â”€ routes/             # API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ lib/               # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¨­å®š
â”œâ”€â”€ utils/             # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â””â”€â”€ prisma/            # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
```

## ğŸ“ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### TypeScript
- **å‹å®šç¾©**: å³å¯†ãªå‹æŒ‡å®šã‚’å¿…é ˆã¨ã™ã‚‹
- **null/undefined**: é©åˆ‡ãªnull ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè£…
- **anyå‹**: åŸå‰‡ç¦æ­¢ï¼ˆã‚„ã‚€ã‚’å¾—ãªã„å ´åˆã®ã¿ï¼‰

### React
- **Hooks**: é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ + Hooksãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨
- **çŠ¶æ…‹ç®¡ç†**: Context API + useState/useReducer
- **å‰¯ä½œç”¨**: useEffect ã®ä¾å­˜é…åˆ—ã‚’é©åˆ‡ã«è¨­å®š

### Node.js/Express
- **éåŒæœŸå‡¦ç†**: async/await ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: é©åˆ‡ãªtry-catchå®Ÿè£…
- **ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢**: èªè¨¼ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã®åˆ†é›¢

## âš™ï¸ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

### é‡è¦ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- **Firebaseè¨­å®š**: `client/src/lib/firebase.ts`
- **Prismaè¨­å®š**: `server/prisma/schema.prisma`
- **ç’°å¢ƒå¤‰æ•°**: `server/.env` (gitignoreæ¸ˆã¿)
- **Firebase ãƒ«ãƒ¼ãƒ«**: `client/firebase-database-rules.json`

### ç’°å¢ƒå¤‰æ•°
```bash
# server/.env
DATABASE_URL="file:./dev.db"
FIREBASE_SERVICE_ACCOUNT_KEY="path/to/service-account.json"
# OPENAI_API_KEY="sk-..." # å°†æ¥çš„ã«OpenAI APIä½¿ç”¨æ™‚
```

## ğŸ“ˆ ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³

**æœ€çµ‚æ›´æ–°**: 2025-07-24  
**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: Claude Code SDK ã«ã‚ˆã‚‹ AIåˆ†ææ©Ÿèƒ½ãŒå®‰å®šç¨¼åƒä¸­  
**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Firebase + SQLite ãƒ‡ãƒ¥ã‚¢ãƒ«æ§‹æˆã§é‹ç”¨ä¸­  

### ä¸»è¦æ©Ÿèƒ½ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
- âœ… AIåˆ†æ (ãƒˆãƒ”ãƒƒã‚¯æŠ½å‡ºãƒ»ç«‹å ´åˆ†æ)
- âœ… æ„è¦‹åé›†ã‚·ã‚¹ãƒ†ãƒ  (ãƒ‘ãƒ–ãƒªãƒƒã‚¯/ç®¡ç†è€…)
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–° (Socket.IO)
- âœ… ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ãƒ»èª²é‡‘ã‚·ã‚¹ãƒ†ãƒ 
- âœ… ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤æ©Ÿèƒ½
- âœ… å¤šè¨€èªå¯¾å¿œ (æ—¥è‹±)

**é–‹ç™ºä½“åˆ¶**: Claude Code ã«ã‚ˆã‚‹ç¶™ç¶šçš„é–‹ç™ºãƒ»ä¿å®ˆ

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **[CLAUDE.md](../CLAUDE.md)**: Claude Codeé–‹ç™ºã‚¬ã‚¤ãƒ‰ï¼ˆãƒ¡ã‚¤ãƒ³ã®é–‹ç™ºè¦ç´„ï¼‰
- **[æŠ€è¡“ä»•æ§˜æ›¸](./technical-specifications.md)**: è©³ç´°ãªæŠ€è¡“ä»•æ§˜
- **[AIåˆ†æã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜æ›¸](./ai-analysis/AIåˆ†æã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜æ›¸.md)**: AIåˆ†æå®Ÿè£…è©³ç´°